# -- 基础设置 ------------------------------------------------------------------
set -g mouse on               # 开启鼠标
set -g base-index 1           # 窗口编号从 1 开始
setw -g pane-base-index 1     # 面板编号从 1 开始
set -g renumber-windows on    # 自动重排编号
setw -g automatic-rename on   # 自动重命名
set -g escape-time 0          # 取消 ESC 延迟
set -g mode-keys vi           # 开启 Vi 风格

# -- 快捷键设置 --------------------------------------------------------
# 前缀键: Ctrl+b

# 1. 会话管理
bind-key C-c new-session                     # [Prefix + Ctrl-c] 新建会话
# 修正: choose-session -> choose-tree
bind-key C-f choose-tree                     # [Prefix + Ctrl-f] 选择会话/窗口

# 2. 窗口导航
unbind n
unbind p
bind-key -r C-h previous-window              # [Prefix + Ctrl-h] 上一个窗口
bind-key -r C-l next-window                  # [Prefix + Ctrl-l] 下一个窗口
bind-key Tab last-window                     # [Prefix + Tab]    最近使用的窗口

# 3. 面板分割
unbind '"'
unbind %
bind-key - split-window -v                   # [Prefix + -] 垂直分割 (上下)
bind-key _ split-window -h                   # [Prefix + _] 水平分割 (左右)

# 4. 面板导航 (Vim 风格)
bind-key h select-pane -L                    # [Prefix + h] 左
bind-key j select-pane -D                    # [Prefix + j] 下
bind-key k select-pane -U                    # [Prefix + k] 上
bind-key l select-pane -R                    # [Prefix + l] 右

# 5. 面板大小调整 (带 -r 可连按)
bind-key -r H resize-pane -L 5               # [Prefix + H] 向左扩
bind-key -r J resize-pane -D 5               # [Prefix + J] 向下扩
bind-key -r K resize-pane -U 5               # [Prefix + K] 向上扩
bind-key -r L resize-pane -R 5               # [Prefix + L] 向右扩

# 6. 面板交换与缩放
bind-key < swap-pane -U                      # [Prefix + <] 前移面板
bind-key > swap-pane -D                      # [Prefix + >] 后移面板
# 修正: resize-pane -Z -> zoom-pane
bind-key + zoom-pane                         # [Prefix + +] 最大化/恢复面板

# 7. 复制模式
# 如果 copy-mode 不生效，请尝试改为 copy-enter
bind-key Enter copy-mode                     # [Prefix + Enter] 进入复制模式
bind-key p paste-buffer                      # [Prefix + p]     粘贴
bind-key b list-buffers                      # [Prefix + b]     列出历史
# -- 外观设置 (Catppuccin Mocha) -----------------------------------------------
# 颜色代码:
# Base: #1e1e2e, Mantle: #181825, Text: #cdd6f4
# Mauve: #cba6f7, Lavender: #b4befe, Blue: #89b4fa
# Overlay1: #7f8497, Surface1: #45475a

# 状态栏整体
set -g status-position bottom
set -g status-justify left
set -g status-style "bg=#181825,fg=#cdd6f4"

# 左侧状态栏 (Session)
set -g status-left "[#S] "
set -g status-left-length 20
set -g status-left-style "fg=#b4befe,bold"

# 右侧状态栏 (时间日期)
set -g status-right " %H:%M %Y-%m-%d "
set -g status-right-length 50
set -g status-right-style "fg=#89b4fa"

# 窗口列表 (中间)
setw -g window-status-separator "  "
# 未激活窗口
setw -g window-status-format "#I:#W"
setw -g window-status-style "fg=#7f8497,bg=#181825"
# 激活窗口
setw -g window-status-current-format "#I:#W*"
setw -g window-status-current-style "fg=#cba6f7,bold,bg=#181825"

# 面板边框
setw -g pane-border-status top
setw -g pane-border-format " #P: #T "
# 未激活边框
set -g pane-border-style "fg=#45475a"
# 激活边框
set -g pane-active-border-style "fg=#cba6f7"

# 消息栏颜色
set -g message-style "bg=#313244,fg=#cba6f7"
